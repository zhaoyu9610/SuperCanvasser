{% extends 'base.html' %}

{% block content %}
    <p>Assignment: {{assignment.id}}</p><br>
    <p>Duration: {{assignment.duration}}</p><br>
    <p>Date: {{assignment.date.date}}</p><br>
    <p>Canvasser: {{assignment.canvassers.id}}</p><br>
    <p>Locations: </p>
    <ul>
        {% for item in assignment.locations %}
        <li>{{ item.street }}{{ item.city }}{{ item.state }}</li>
        {% endfor %}
    </ul>

    <div id="map"></div>

    <style>
       /* Set the size of the div element that contains the map */
      #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>

       <script>
// Initialize and add the map
function initMap() {

  var locations = {{ geo }};

  var map = new google.maps.Map(
      document.getElementById('map'), {zoom: 11, center: {lat: locations[0][0], lng: locations[0][1]}});
  for (i=0; i <locations.length; i ++){
      var marker = new google.maps.Marker({position: {lat: locations[i][0], lng: locations[i][1]}, map: map})
  }
}
    </script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA2KRRab6Gis0ec2h5D5EFCdiiZMbbf-Pw&callback=initMap">
    </script>

{% endblock %}
